{
  "code": "import Reader from \"./Reader\";\r\nimport commandReader from \"./commandReader\";\r\nexport default class DiaLab extends Laya.Scene {\r\n    constructor() {\r\n        super();\r\n        this.story = [\"\"];\r\n        DiaLab.instance = this;\r\n    }\r\n    createChildren() {\r\n        super.createChildren();\r\n        this.loadScene(\"Msg\");\r\n    }\r\n    onEnable() {\r\n        this.Diolog.on(Laya.Event.CLICK, this, this.ClickFn);\r\n    }\r\n    onAwake() {\r\n        this.reader = this.getComponent(Reader);\r\n        this.comReader = this.getComponent(commandReader);\r\n        this.onlyOnce = false;\r\n        this.comNum = 8;\r\n        this.chaNum = 10;\r\n        this.line = 11;\r\n        this.faceNum = 12;\r\n        this.waitNum = 13;\r\n        this.findNext = 7;\r\n        this.word = 0;\r\n        this.lineComplete = false;\r\n        this.Btn1.visible = false;\r\n        this.Btn2.visible = false;\r\n        this.Btn3.visible = false;\r\n        this.ShowWords();\r\n    }\r\n    ShowWords() {\r\n        this.reader.read(this.chaNum);\r\n        this.showWord = setInterval(() => {\r\n            this.splitted = this.story[this.line][this.word];\r\n            if (this.splitted == undefined)\r\n                return;\r\n            this.Diolog.text += this.splitted;\r\n            this.word++;\r\n            if (this.story[this.line][this.word] == undefined) {\r\n                clearInterval(this.showWord);\r\n                this.lineComplete = true;\r\n                this.comReader.showBtn();\r\n            }\r\n        }, 10);\r\n    }\r\n    isEnd() {\r\n        if (this.story[this.line + this.findNext] == undefined) {\r\n            this.Diolog.off(Laya.Event.CLICK, this, this.ClickFn);\r\n            console.log(\"結束\");\r\n            return;\r\n        }\r\n        else if (this.story[this.line][this.word] == undefined) {\r\n            this.onlyOnce = true;\r\n            this.word = 0;\r\n            this.Diolog.text = \"\";\r\n            this.line += this.findNext;\r\n            this.chaNum += this.findNext;\r\n            this.faceNum += this.findNext;\r\n            this.comNum += this.findNext;\r\n            this.waitNum += this.findNext;\r\n            return;\r\n        }\r\n    }\r\n    ClickFn() {\r\n        this.lineComplete = !this.lineComplete;\r\n        if (this.lineComplete) {\r\n            clearInterval(this.showWord);\r\n            this.word = this.story[this.line].length;\r\n            this.Diolog.text = this.story[this.line];\r\n            this.lineComplete = true;\r\n            this.comReader.showBtn();\r\n        }\r\n        else {\r\n            this.isEnd();\r\n            this.ShowWords();\r\n        }\r\n    }\r\n    nameCase(name) {\r\n        switch (name) {\r\n            case \"玩家小紅\":\r\n                this.Name.text = \"小紅\";\r\n                break;\r\n            case \"元老-狼大\":\r\n                this.Name.text = \"元老-狼大\";\r\n                break;\r\n            case \"\":\r\n                this.Name.text = \"\";\r\n                break;\r\n            case \"D\":\r\n                this.Name.text = \"D\";\r\n                break;\r\n            case \"E\":\r\n                this.Name.text = \"E\";\r\n                break;\r\n            case \"F\":\r\n                this.Name.text = \"F\";\r\n                break;\r\n            case \"G\":\r\n                this.Name.text = \"G\";\r\n                break;\r\n            case \"H\":\r\n                this.Name.text = \"H\";\r\n                break;\r\n            case \"I\":\r\n                this.Name.text = \"I\";\r\n                break;\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "C:/Users/88692/Desktop/Warming_Girl/DialogueSystem/src/Scripts/Reader.ts",
    "C:/Users/88692/Desktop/Warming_Girl/DialogueSystem/src/Scripts/commandReader.ts"
  ]
}
